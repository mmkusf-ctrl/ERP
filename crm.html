<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>CRM | Stark Premium ERP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css?v=4">
  <style>
    /* Specific Master/CRM Page Styles */
    .pill-filter {
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      border: 1px solid transparent;
      background: white;
      color: var(--text-muted);
      transition: all 0.2s;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .pill-filter:hover {
      background: #f8fafc;
      color: var(--text-main);
    }

    .pill-filter.active {
      background: #6366f1;
      color: white;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .master-row {
      transition: transform 0.1s, background-color 0.1s;
    }

    .master-row:hover {
      transform: scale(1.002);
      background-color: #f8fafc;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      z-index: 10;
      position: relative;
    }

    .cust-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #e0e7ff 0%, #ede9fe 100%);
      color: #6366f1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      border: 1px solid #e2e8f0;
    }
  </style>
</head>

<body>

  <!-- Top Navigation -->
  <header class="topbar">
    <div class="topbar-inner">
      <a href="dashboard.html" class="logo">
        <img src="images/stark-logo.png" alt="Stark Premium">
        <span class="logo-text">Stark ERP</span>
      </a>
      <nav class="nav">
        <a class="nav-link" href="dashboard.html">Overview</a>
        <a class="nav-link" href="master.html">Items</a>
        <a class="nav-link active" href="crm.html">CRM</a>
        <a class="nav-link" href="vendor.html">Vendor</a>
        <a class="nav-link" href="purchasing.html">Purchasing</a>
        <a class="nav-link" href="inventory.html">Inventory</a>
        <a class="nav-link" href="accounting.html">Accounting</a>
        <a class="nav-link" href="orders.html">Orders</a>
        <a class="nav-link" href="logistics.html">Logistics</a>
        <a class="nav-link" href="reports.html">Reports</a>
        <a class="nav-link" href="events.html">Events</a>
      </nav>
      <div style="display:flex; align-items:center; gap:12px;">
        <div class="badge badge-green" style="display:none; @media(min-width:700px){display:inline-flex;}">
          Online</div>
        <button class="hamburger" onclick="openMobileNav()">‚ò∞</button>
      </div>
    </div>
  </header>

  <!-- Mobile Drawer -->
  <div class="mobile-nav" id="mobileNav">
    <div class="mobile-drawer">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
        <strong style="font-size:16px;">Navigation</strong>
        <button onclick="closeMobileNav()"
          style="background:none; border:none; font-size:24px; cursor:pointer;">&times;</button>
      </div>
      <a class="mobile-link" href="dashboard.html">Overview</a>
      <a class="mobile-link active" href="crm.html">CRM</a>
      <a class="mobile-link" href="master.html">Items</a>
      <a class="mobile-link" href="inventory.html">Inventory</a>
      <a class="mobile-link" href="orders.html">Orders</a>
      <a class="mobile-link" href="logistics.html">Logistics</a>
      <a class="mobile-link" href="reports.html">Reports</a>
    </div>
  </div>

  <main class="container soft-ui-wrapper" style="padding-top:40px;">

    <!-- Page Header -->
    <div style="display:flex; justify-content:space-between; align-items:end; margin-bottom:32px;">
      <div>
        <h1 class="page-title" style="margin-bottom:8px;">Customer Relations</h1>
        <p class="page-desc">Manage customer directory, view order activity, and analyze retention signals.</p>
        <div
          style="height:4px; width:40px; background:linear-gradient(90deg, #6366f1, transparent); border-radius:2px; margin-top:16px;">
        </div>
      </div>
      <button class="btn btn-primary" onclick="openCustomerModal()"
        style="background:#6366f1; border:none; box-shadow:0 4px 12px rgba(99, 102, 241, 0.3); height:48px; padding:0 24px;">
        + New Customer
      </button>
    </div>

    <!-- KPI Grid -->
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:24px; margin-bottom:32px;">
      <!-- Total Customers -->
      <div class="card-soft" style="padding:20px; display:flex; align-items:center; gap:16px;">
        <div
          style="width:48px; height:48px; border-radius:12px; background:#f0f9ff; color:#0369a1; display:flex; align-items:center; justify-content:center; font-size:20px;">
          üë•</div>
        <div>
          <div style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase;">Total Customers</div>
          <div id="kpiTotal" style="font-size:24px; font-weight:800; color:#0f172a;">0</div>
        </div>
      </div>

      <!-- Active Customers -->
      <div class="card-soft" style="padding:20px; display:flex; align-items:center; gap:16px;">
        <div
          style="width:48px; height:48px; border-radius:12px; background:#f0fdf4; color:#15803d; display:flex; align-items:center; justify-content:center; font-size:20px;">
          ‚ö°</div>
        <div>
          <div style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase;">Active (Month)</div>
          <div id="kpiActive" style="font-size:24px; font-weight:800; color:#14532d;">0</div>
        </div>
      </div>

      <!-- Zero Sales -->
      <div class="card-soft" style="padding:20px; display:flex; align-items:center; gap:16px;">
        <div
          style="width:48px; height:48px; border-radius:12px; background:#fef2f2; color:#b91c1c; display:flex; align-items:center; justify-content:center; font-size:20px;">
          üí§</div>
        <div>
          <div style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase;">Zero Activity</div>
          <div id="kpiZero" style="font-size:24px; font-weight:800; color:#7f1d1d;">0</div>
        </div>
      </div>

      <!-- Revenue -->
      <div class="card-soft" style="padding:20px; display:flex; align-items:center; gap:16px;">
        <div
          style="width:48px; height:48px; border-radius:12px; background:#fffbeb; color:#b45309; display:flex; align-items:center; justify-content:center; font-size:20px;">
          üí∞</div>
        <div>
          <div style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase;">Revenue (Month)</div>
          <div id="kpiRev" style="font-size:24px; font-weight:800; color:#78350f;">$0.00</div>
        </div>
      </div>
    </div>

    <!-- Controls & Filters -->
    <div style="margin-bottom:24px; display:flex; flex-direction:column; gap:16px;">

      <!-- Search & Date -->
      <div class="card-soft" style="padding:12px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
        <div style="position:relative; flex:1; min-width:200px;">
          <span style="position:absolute; left:16px; top:50%; transform:translateY(-50%); opacity:0.4;">üîç</span>
          <input id="search" class="input" placeholder="Search customer, location, or contact..." oninput="render()"
            style="padding-left:42px; height:48px; border:none; background:#f8fafc; font-size:14px;">
        </div>
        <div style="width:1px; height:24px; background:#e2e8f0; display:none; @media(min-width:600px){display:block;}"></div>
        <select id="monthSelect" class="input" onchange="render()" style="width:auto; min-width:180px; height:48px; border:none; background:#f8fafc;"></select>
      </div>

      <!-- Dynamic Pills -->
      <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
        <div style="font-size:12px; font-weight:700; color:#64748b; margin-right:8px;">FILTER:</div>
        <div class="pill-filter active" onclick="setFilter('all')">All Customers</div>
        <div class="pill-filter" onclick="setFilter('active')">Active</div>
        <div class="pill-filter" onclick="setFilter('nosales')">Inactive / Quiet</div>
      </div>
    </div>

    <div class="grid grid-2" style="align-items:start;">
      <!-- Directory -->
      <div class="card-soft table-container"
        style="padding:0; overflow:hidden; grid-column:span 2; @media(min-width:1100px){grid-column:auto;}">
        <table id="custTable">
          <thead>
            <tr style="background:#f8fafc; text-transform:uppercase; font-size:11px; letter-spacing:0.8px; color:#64748b;">
              <th style="padding:16px 24px;">Company</th>
              <th style="padding:16px;">Location</th>
              <th style="padding:16px; text-align:right;">Orders (Mo)</th>
              <th style="padding:16px; text-align:right;">Spend (Life)</th>
              <th style="padding:16px;">Status</th>
            </tr>
          </thead>
          <tbody id="custBody"></tbody>
        </table>
      </div>

      <!-- Details Sidebar -->
      <aside style="display:grid; gap:24px; align-content:start; display:none; @media(min-width:1100px){display:grid;}">
        <div class="card-soft" style="padding:24px;">
          <h2 style="font-size:14px; font-weight:700; color:#64748b; margin:0 0 16px; text-transform:uppercase; letter-spacing:0.5px;">Customer Insights</h2>

          <div id="detailPlaceholder"
            style="padding:40px 0; text-align:center; color:var(--text-muted); font-size:13px;">
            Select a customer row to view details.
          </div>

          <div id="detailContent" style="display:none;">
            <div style="display:flex; align-items:center; gap:16px; margin-bottom:20px;">
                <div id="dAvatar" class="cust-avatar" style="width:48px; height:48px; font-size:20px;"></div>
                <div>
                    <strong style="display:block; font-size:18px; color:#1e293b;" id="dName">Name</strong>
                    <div style="font-size:13px; color:#64748b;" id="dLoc">Location</div>
                </div>
            </div>

            <div style="display:grid; gap:12px; font-size:13px; margin-bottom:24px; background:#f8fafc; padding:16px; border-radius:12px;">
              <div style="display:flex; gap:12px; align-items:center;">
                <span style="color:#94a3b8; width:20px;">üë§</span> <span id="dContact" style="font-weight:500;">Contact</span>
              </div>
              <div style="display:flex; gap:12px; align-items:center;">
                <span style="color:#94a3b8; width:20px;">üìß</span> <a id="dEmail" href="#" style="color:#6366f1; text-decoration:none;">Email</a>
              </div>
              <div style="display:flex; gap:12px; align-items:center;">
                <span style="color:#94a3b8; width:20px;">üìû</span> <span id="dPhone" style="font-family:monospace;">Phone</span>
              </div>
            </div>

            <div style="border-top:1px solid #e2e8f0; padding-top:16px;">
              <strong style="display:block; font-size:11px; text-transform:uppercase; color:#64748b; margin-bottom:8px;">Activity (Last 6 Mos)</strong>
              <div id="monthlyLine" style="font-size:13px; color:#6366f1; font-family:monospace; letter-spacing:4px;">‚Äî</div>
            </div>
            
            <div style="margin-top:16px;">
                <strong style="display:block; font-size:11px; text-transform:uppercase; color:#64748b; margin-bottom:8px;">Favorite Item</strong>
                <div id="skuLine" style="font-size:14px; font-weight:600; color:#1e293b;">‚Äî</div>
            </div>
          </div>
        </div>

        <div class="card-soft" style="padding:20px;">
          <h2 style="font-size:12px; font-weight:700; color:#64748b; margin:0 0 12px; text-transform:uppercase;">Quick Actions</h2>
          <button class="btn btn-secondary" style="width:100%; height:40px; font-size:13px;" onclick="seedCustomers()">Reload Demo Data</button>
        </div>
      </aside>
    </div>

    <div style="margin-top:40px; text-align:center; color:var(--text-muted); font-size:13px;">
      &copy; 2026 Stark Premium ERP.
    </div>
  </main>

  <!-- Add Customer Modal -->
  <div class="mobile-nav" id="customerModal" style="z-index:900; background:rgba(0,0,0,0.5); backdrop-filter:blur(4px);">
    <div class="card-soft"
      style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); width:min(90%, 500px); max-height:90vh; overflow-y:auto; box-shadow:0 20px 40px rgba(0,0,0,0.2); border:1px solid #fff;">
      <div
        style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:12px; border-bottom:1px solid #f1f5f9;">
        <h3 style="margin:0; font-size:18px;">Add Customer</h3>
        <button class="toast-close" onclick="closeCustomerModal()"
          style="border:none; background:transparent; cursor:pointer; font-size:24px; color:#94a3b8;">&times;</button>
      </div>

      <div style="display:grid; gap:16px;">
        <div>
          <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Company Name</label>
          <input id="cName" class="input" placeholder="e.g. Acme Corp" style="background:#f8fafc; border:1px solid #e2e8f0;">
        </div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
          <div>
            <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Location</label>
            <input id="cLocation" class="input" placeholder="City, State" style="background:#f8fafc; border:1px solid #e2e8f0;">
          </div>
          <div>
            <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Type</label>
            <input id="cType" class="input" placeholder="Retailer" value="Retailer" style="background:#f8fafc; border:1px solid #e2e8f0;">
          </div>
        </div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
          <div>
            <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Contact Person</label>
            <input id="cContact" class="input" placeholder="Full Name" style="background:#f8fafc; border:1px solid #e2e8f0;">
          </div>
          <div>
            <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Phone</label>
            <input id="cPhone" class="input" placeholder="(555) 000-0000" style="background:#f8fafc; border:1px solid #e2e8f0;">
          </div>
        </div>

        <div>
           <label style="font-size:11px; font-weight:700; color:#64748b; text-transform:uppercase; margin-bottom:6px; display:block;">Email Address</label>
           <input id="cEmail" class="input" placeholder="name@company.com" style="background:#f8fafc; border:1px solid #e2e8f0;">
        </div>

        <!-- Invite Feature -->
        <div style="background:#f0f9ff; padding:12px; border-radius:8px; border:1px solid #bae6fd; display:flex; gap:12px; align-items:start;">
             <input type="checkbox" id="cInvite" checked style="margin-top:4px;">
             <div>
                 <strong style="display:block; font-size:13px; color:#0369a1;">Send Shop Invitation</strong>
                 <p style="margin:0; font-size:12px; color:#0c4a6e; line-height:1.4;">Send an email with a link for this customer to create their wholesale account.</p>
             </div>
        </div>

        <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:8px;">
          <button class="btn btn-secondary" onclick="closeCustomerModal()">Cancel</button>
          <button class="btn btn-primary" onclick="addCustomer()" style="background:#6366f1; border:none;">Save Profile</button>
        </div>
      </div>
    </div>
  </div>

  <div id="toastWrap" style="position:fixed; bottom:20px; right:20px; z-index:9999; display:grid; gap:10px;"></div>

  <script src="erp.js"></script>
  <script>
    const AUTH_KEY = "stark_erp_auth_v1";
    (function () { try { const a = JSON.parse(localStorage.getItem(AUTH_KEY) || "null"); if (!a || !a.user) window.location.href = "index.html"; } catch { window.location.href = "index.html"; } })();

    const KEY_CUST = "stark_erp_customers_v1";
    const KEY_SALES = "stark_erp_sales_v1";
    let CURRENT_FILTER = "all"; // all, active, nosales

    // Setup Month Dropdown
    const monthSelect = document.getElementById("monthSelect");
    const today = new Date();
    for (let i = 0; i < 6; i++) {
      const d = new Date(today.getFullYear(), today.getMonth() - i, 1);
      const val = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}`;
      const lab = d.toLocaleString('default', { month: 'long', year: 'numeric' });
      const opt = document.createElement("option");
      opt.value = val;
      opt.textContent = lab;
      monthSelect.appendChild(opt);
    }
    monthSelect.value = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, "0")}`;

    function load(key, fallback) {
      try { return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }
      catch { return fallback; }
    }
    function save(key, data) { localStorage.setItem(key, JSON.stringify(data)); }
    
    // Using window.formatMoney from erp.js if available, else fallback
    const fmtMoney = window.formatMoney || function(n) { return "$" + Number(n).toFixed(2); };

    function openCustomerModal() { document.getElementById("customerModal").classList.add("open"); }
    function closeCustomerModal() { document.getElementById("customerModal").classList.remove("open"); }

    function addCustomer() {
      const name = (document.getElementById("cName").value || "").trim();
      const loc = (document.getElementById("cLocation").value || "").trim();
      const email = (document.getElementById("cEmail").value || "").trim();
      const sendInvite = document.getElementById("cInvite").checked;

      if (!name) return toast("Required", "Company Name is missing.", "error");

      const c = {
        id: "C-" + Date.now(),
        name,
        location: loc || "Unknown",
        type: document.getElementById("cType").value,
        contact: document.getElementById("cContact").value,
        email: email,
        phone: document.getElementById("cPhone").value,
        joined: new Date().toISOString()
      };

      const list = load(KEY_CUST, []);
      list.push(c);
      save(KEY_CUST, list);
      
      closeCustomerModal();
      
      if (sendInvite && email) {
          setTimeout(() => {
              toast("Invitation Sent", `Link sent to ${email}`, "success");
          }, 500);
      } else if (sendInvite && !email) {
          toast("Warning", "Customer saved, but no email provided for invitation.", "warning");
      } else {
          toast("Success", "Customer profile created.");
      }
      
      render();
    }

    function setFilter(f) {
      CURRENT_FILTER = f;
      document.querySelectorAll(".pill-filter").forEach(x => x.classList.remove("active"));
      // Simple loop to find correct pill (checking text content is fragile, better to pass 'this' or use ID)
      // Re-doing simple way:
      const pills = document.querySelectorAll(".pill-filter");
      if (f === 'all') pills[0].classList.add("active");
      if (f === 'active') pills[1].classList.add("active");
      if (f === 'nosales') pills[2].classList.add("active");
      render();
    }

    function render() {
      const customers = load(KEY_CUST, []);
      const sales = load(KEY_SALES, []);
      const search = (document.getElementById("search").value || "").toLowerCase();
      const selMonth = document.getElementById("monthSelect").value; // "YYYY-MM"

      // Stats aggregation
      const custStats = {};
      sales.forEach(s => {
        const ym = s.date.slice(0, 7);
        if (!custStats[s.customer]) custStats[s.customer] = { monthOrders: 0, monthRev: 0, lifeRev: 0, skus: {}, months: new Set() };
        const st = custStats[s.customer];
        st.lifeRev += (Number(s.unitPrice) * Number(s.qty));
        st.skus[s.sku] = (st.skus[s.sku] || 0) + Number(s.qty);
        st.months.add(ym);

        if (ym === selMonth) {
          st.monthOrders++;
          st.monthRev += (Number(s.unitPrice) * Number(s.qty));
        }
      });

      // Update KPIs
      let totalRev = 0;
      let activeCount = 0;
      let zeroCount = 0;

      customers.forEach(c => {
        const st = custStats[c.name];
        if (st && st.monthOrders > 0) {
          activeCount++;
          totalRev += st.monthRev;
        } else {
          zeroCount++;
        }
      });

      document.getElementById("kpiTotal").textContent = customers.length;
      document.getElementById("kpiActive").textContent = activeCount;
      document.getElementById("kpiZero").textContent = zeroCount;
      document.getElementById("kpiRev").textContent = fmtMoney(totalRev);

      // Filter List
      let shown = customers.filter(c => {
        const txt = (c.name + " " + c.location + " " + (c.contact || "")).toLowerCase();
        if (search && !txt.includes(search)) return false;

        const st = custStats[c.name] || { monthOrders: 0 };
        const isActive = st.monthOrders > 0;

        if (CURRENT_FILTER === 'active' && !isActive) return false;
        if (CURRENT_FILTER === 'nosales' && isActive) return false;

        return true;
      });

      // Build Table
      const tbody = document.getElementById("custBody");
      tbody.innerHTML = "";

      if (shown.length === 0) {
        tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; color:var(--text-muted); padding:40px;">No customers found.</td></tr>`;
      }

      shown.forEach(c => {
        const st = custStats[c.name] || { monthOrders: 0, lifeRev: 0 };
        const isActive = st.monthOrders > 0;
        
        const tr = document.createElement("tr");
        tr.className = "master-row";
        tr.style.cursor = "pointer";
        tr.style.borderBottom = "1px solid #f1f5f9";
        
        tr.onclick = () => showDetail(c, st, selMonth);
        
        tr.innerHTML = `
          <td style="padding:16px 24px;">
            <div style="font-weight:700; color:#1e293b; font-size:14px;">${escapeHtml(c.name)}</div>
            <div style="font-size:12px; color:#64748b;">${escapeHtml(c.type || "Standard")}</div>
          </td>
          <td style="padding:16px; color:#475569;">${escapeHtml(c.location)}</td>
          <td style="padding:16px; text-align:right; font-weight:600; color:#334155;">${st.monthOrders}</td>
          <td style="padding:16px; text-align:right; font-variant-numeric:tabular-nums;">${fmtMoney(st.lifeRev)}</td>
          <td style="padding:16px;">
            ${isActive 
                ? `<span class="badge badge-green">Active</span>` 
                : `<span class="badge badge-yellow" style="opacity:0.7;">Quiet</span>`}
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function showDetail(c, stats, selMonth) {
      document.getElementById("detailPlaceholder").style.display = "none";
      document.getElementById("detailContent").style.display = "block";
      document.getElementById("mobileNav").classList.remove('open'); // Close nav if open (mobile optimization)

      document.getElementById("dName").textContent = c.name;
      document.getElementById("dLoc").textContent = c.location;
      document.getElementById("dContact").textContent = c.contact || "‚Äî";
      document.getElementById("dEmail").textContent = c.email || "‚Äî";
      document.getElementById("dEmail").href = c.email ? "mailto:" + c.email : "#";
      document.getElementById("dPhone").textContent = c.phone || "‚Äî";
      
      const initials = (c.name || "C").substring(0,2).toUpperCase();
      document.getElementById("dAvatar").textContent = initials;

      // Monthly Line
      const h = [];
      if (stats && stats.months) {
        for (let i = 5; i >= 0; i--) {
          const d = new Date(today.getFullYear(), today.getMonth() - i, 1);
          const ym = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}`;
          const has = stats.months.has(ym) ? "‚óè" : "‚óã";
          h.push(has);
        }
      } else {
        for (let i = 0; i < 6; i++) h.push("‚óã");
      }
      document.getElementById("monthlyLine").textContent = h.join("  ");

      // SKU
      let topSku = "None"; let max = 0;
      if (stats && stats.skus) {
        for (const [k, v] of Object.entries(stats.skus)) {
          if (v > max) { max = v; topSku = k; }
        }
      }
      document.getElementById("skuLine").textContent = topSku + (max ? ` (${max} units)` : "");
    }

    /* Demo Data Loading */
    function seedCustomers() {
      const demo = [
        { id: "C1", name: "Asha Retail", location: "Austin, TX", type: "Retailer", contact: "Sarah L", email: "sarah@asharetail.com", phone: "(512) 555-0101" },
        { id: "C2", name: "Blue Harbor", location: "Miami, FL", type: "Wholesale", contact: "Jim B", email: "jim@blueharbor.com", phone: "(305) 555-0123" },
        { id: "C3", name: "Citrine Luxe", location: "New York, NY", type: "Boutique", contact: "Elena R", email: "elena@citrine.com", phone: "(212) 555-0199" },
        { id: "C4", name: "Desert Pearl", location: "Phoenix, AZ", type: "Retailer", contact: "Marc D", email: "marc@desertp.com", phone: "(602) 555-0144" },
        { id: "C5", name: "Emerald Lane", location: "Seattle, WA", type: "Boutique", contact: "Lisa T", email: "lisa@emerald.com", phone: "(206) 555-0188" }
      ];
      save(KEY_CUST, demo);
      toast("Data Loaded", "Demo Customers loaded.");
      render();
    }

    // Init
    if (load(KEY_CUST, []).length === 0) seedCustomers();
    render();

  </script>
</body>
</html>
